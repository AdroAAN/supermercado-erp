<form id="formProducto" method="post" enctype="multipart/form-data" novalidate class="space-y-4">
    {% csrf_token %}
    
    <!-- Header del modal -->
    <div class="modal-header border-b border-gray-600 p-4 flex justify-between items-center">
        <h5 class="text-xl font-bold text-acento">
            {% if form.instance.pk %}Editar producto{% else %}Nuevo producto{% endif %}
        </h5>
        <button type="button"
                onclick="ocultarModal('modalProducto')"
                class="text-gray-400 hover:text-white transition p-2 rounded-full"
                aria-label="Cerrar">
            <i data-lucide="x" class="w-6 h-6"></i>
        </button>
    </div>

    <!-- Cuerpo del modal -->
    <div class="modal-body p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="{{ form.nombre.id_for_label }}" class="block text-sm font-medium mb-2">Nombre</label>
                {{ form.nombre }}
                {% for error in form.nombre.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.precio.id_for_label }}" class="block text-sm font-medium mb-2">Precio</label>
                {{ form.precio }}
                {% for error in form.precio.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.stock.id_for_label }}" class="block text-sm font-medium mb-2">Stock</label>
                {{ form.stock }}
                {% for error in form.stock.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>

            <div class="col-span-2">
                <label for="{{ form.descripcion.id_for_label }}" class="block text-sm font-medium mb-2">Descripción</label>
                {{ form.descripcion }}
                {% for error in form.descripcion.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>

            <div class="col-span-2">
                <label for="{{ form.imagen.id_for_label }}" class="block text-sm font-medium mb-2">Imagen</label>
                {{ form.imagen }}
                {% for error in form.imagen.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>

            <div class="col-span-2 md:col-span-1">
                <label for="{{ form.categoria.id_for_label }}" class="block text-sm font-medium mb-2">Categoría</label>
                <div class="flex items-center gap-2">
                    {{ form.categoria }}
                    <button type="button" id="btnAddCat"
                            title="Crear nueva categoría"
                            class="p-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition flex items-center justify-center">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>
                {% for error in form.categoria.errors %}
                    <div class="text-red-400 text-sm mt-1">{{ error }}</div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Footer del modal -->
    <div class="modal-footer border-t border-gray-600 p-4 flex justify-end gap-4">
    <button type="submit"
            class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded transition flex items-center gap-2">
        <i data-lucide="save" class="w-4 h-4"></i>
        Guardar
    </button>
    <button type="button"
            onclick="ocultarModal('modalProducto')"
            class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded transition flex items-center gap-2">
        <i data-lucide="x" class="w-4 h-4"></i>
        Cancelar
    </button>
    </div>
</form>

<!-- Inicializar íconos -->
<script>
    if (window.lucide) {
        initLucideIcons();
    }
</script>
